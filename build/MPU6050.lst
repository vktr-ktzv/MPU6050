ARM GAS  /tmp/ccA5Tg20.s 			page 1


   1              		.cpu cortex-m0
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 4
  11              		.file	"MPU6050.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.MPU6050_Writebyte,"ax",%progbits
  16              		.align	1
  17              		.global	MPU6050_Writebyte
  18              		.arch armv6s-m
  19              		.syntax unified
  20              		.code	16
  21              		.thumb_func
  22              		.fpu softvfp
  24              	MPU6050_Writebyte:
  25              	.LVL0:
  26              	.LFB40:
  27              		.file 1 "Core/Src/MPU6050.c"
   1:Core/Src/MPU6050.c **** #include "MPU6050.h"
   2:Core/Src/MPU6050.c **** #include "main.h"
   3:Core/Src/MPU6050.c **** #include "i2c.h"
   4:Core/Src/MPU6050.c **** 
   5:Core/Src/MPU6050.c **** Struct_MPU6050 MPU6050;
   6:Core/Src/MPU6050.c **** 
   7:Core/Src/MPU6050.c **** 
   8:Core/Src/MPU6050.c ****  
   9:Core/Src/MPU6050.c **** 
  10:Core/Src/MPU6050.c **** 
  11:Core/Src/MPU6050.c **** void MPU6050_Writebyte(uint8_t reg_addr, uint8_t val)
  12:Core/Src/MPU6050.c **** {
  28              		.loc 1 12 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 12 1 is_stmt 0 view .LVU1
  33 0000 00B5     		push	{lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 14, -4
  37 0002 87B0     		sub	sp, sp, #28
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 32
  40 0004 1723     		movs	r3, #23
  41 0006 6B44     		add	r3, r3, sp
  42 0008 1970     		strb	r1, [r3]
  13:Core/Src/MPU6050.c **** 	HAL_I2C_Mem_Write(&hi2c1, MPU6050_ADDR, reg_addr, I2C_MEMADD_SIZE_8BIT, &val, 1, 1);
  43              		.loc 1 13 2 is_stmt 1 view .LVU2
  44 000a 0200     		movs	r2, r0
  45 000c 0121     		movs	r1, #1
ARM GAS  /tmp/ccA5Tg20.s 			page 2


  46              	.LVL1:
  47              		.loc 1 13 2 is_stmt 0 view .LVU3
  48 000e 0291     		str	r1, [sp, #8]
  49              	.LVL2:
  50              		.loc 1 13 2 view .LVU4
  51 0010 0191     		str	r1, [sp, #4]
  52 0012 0093     		str	r3, [sp]
  53 0014 0123     		movs	r3, #1
  54 0016 CF31     		adds	r1, r1, #207
  55 0018 0248     		ldr	r0, .L2
  56              	.LVL3:
  57              		.loc 1 13 2 view .LVU5
  58 001a FFF7FEFF 		bl	HAL_I2C_Mem_Write
  59              	.LVL4:
  14:Core/Src/MPU6050.c **** }
  60              		.loc 1 14 1 view .LVU6
  61 001e 07B0     		add	sp, sp, #28
  62              		@ sp needed
  63 0020 00BD     		pop	{pc}
  64              	.L3:
  65 0022 C046     		.align	2
  66              	.L2:
  67 0024 00000000 		.word	hi2c1
  68              		.cfi_endproc
  69              	.LFE40:
  71              		.section	.text.MPU6050_Writebytes,"ax",%progbits
  72              		.align	1
  73              		.global	MPU6050_Writebytes
  74              		.syntax unified
  75              		.code	16
  76              		.thumb_func
  77              		.fpu softvfp
  79              	MPU6050_Writebytes:
  80              	.LVL5:
  81              	.LFB41:
  15:Core/Src/MPU6050.c **** 
  16:Core/Src/MPU6050.c **** void MPU6050_Writebytes(uint8_t reg_addr, uint8_t len, uint8_t* data)
  17:Core/Src/MPU6050.c **** {
  82              		.loc 1 17 1 is_stmt 1 view -0
  83              		.cfi_startproc
  84              		@ args = 0, pretend = 0, frame = 0
  85              		@ frame_needed = 0, uses_anonymous_args = 0
  86              		.loc 1 17 1 is_stmt 0 view .LVU8
  87 0000 00B5     		push	{lr}
  88              	.LCFI2:
  89              		.cfi_def_cfa_offset 4
  90              		.cfi_offset 14, -4
  91 0002 85B0     		sub	sp, sp, #20
  92              	.LCFI3:
  93              		.cfi_def_cfa_offset 24
  18:Core/Src/MPU6050.c **** 	HAL_I2C_Mem_Write(&hi2c1, MPU6050_ADDR, reg_addr, I2C_MEMADD_SIZE_8BIT, data, len, 1);
  94              		.loc 1 18 2 is_stmt 1 view .LVU9
  95 0004 0123     		movs	r3, #1
  96 0006 0293     		str	r3, [sp, #8]
  97 0008 0191     		str	r1, [sp, #4]
  98 000a 0092     		str	r2, [sp]
  99 000c 0200     		movs	r2, r0
ARM GAS  /tmp/ccA5Tg20.s 			page 3


 100              	.LVL6:
 101              		.loc 1 18 2 is_stmt 0 view .LVU10
 102 000e D021     		movs	r1, #208
 103              	.LVL7:
 104              		.loc 1 18 2 view .LVU11
 105 0010 0248     		ldr	r0, .L5
 106              	.LVL8:
 107              		.loc 1 18 2 view .LVU12
 108 0012 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 109              	.LVL9:
  19:Core/Src/MPU6050.c **** }
 110              		.loc 1 19 1 view .LVU13
 111 0016 05B0     		add	sp, sp, #20
 112              		@ sp needed
 113 0018 00BD     		pop	{pc}
 114              	.L6:
 115 001a C046     		.align	2
 116              	.L5:
 117 001c 00000000 		.word	hi2c1
 118              		.cfi_endproc
 119              	.LFE41:
 121              		.section	.text.MPU6050_Readbyte,"ax",%progbits
 122              		.align	1
 123              		.global	MPU6050_Readbyte
 124              		.syntax unified
 125              		.code	16
 126              		.thumb_func
 127              		.fpu softvfp
 129              	MPU6050_Readbyte:
 130              	.LVL10:
 131              	.LFB42:
  20:Core/Src/MPU6050.c **** 
  21:Core/Src/MPU6050.c **** void MPU6050_Readbyte(uint8_t reg_addr, uint8_t* data)
  22:Core/Src/MPU6050.c **** {
 132              		.loc 1 22 1 is_stmt 1 view -0
 133              		.cfi_startproc
 134              		@ args = 0, pretend = 0, frame = 0
 135              		@ frame_needed = 0, uses_anonymous_args = 0
 136              		.loc 1 22 1 is_stmt 0 view .LVU15
 137 0000 00B5     		push	{lr}
 138              	.LCFI4:
 139              		.cfi_def_cfa_offset 4
 140              		.cfi_offset 14, -4
 141 0002 85B0     		sub	sp, sp, #20
 142              	.LCFI5:
 143              		.cfi_def_cfa_offset 24
  23:Core/Src/MPU6050.c **** 	HAL_I2C_Mem_Read(&hi2c1, MPU6050_ADDR, reg_addr, I2C_MEMADD_SIZE_8BIT, data, 1, 1);
 144              		.loc 1 23 2 is_stmt 1 view .LVU16
 145 0004 0200     		movs	r2, r0
 146 0006 0123     		movs	r3, #1
 147 0008 0293     		str	r3, [sp, #8]
 148 000a 0193     		str	r3, [sp, #4]
 149 000c 0091     		str	r1, [sp]
 150 000e D021     		movs	r1, #208
 151              	.LVL11:
 152              		.loc 1 23 2 is_stmt 0 view .LVU17
 153 0010 0248     		ldr	r0, .L8
ARM GAS  /tmp/ccA5Tg20.s 			page 4


 154              	.LVL12:
 155              		.loc 1 23 2 view .LVU18
 156 0012 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 157              	.LVL13:
  24:Core/Src/MPU6050.c **** }
 158              		.loc 1 24 1 view .LVU19
 159 0016 05B0     		add	sp, sp, #20
 160              		@ sp needed
 161 0018 00BD     		pop	{pc}
 162              	.L9:
 163 001a C046     		.align	2
 164              	.L8:
 165 001c 00000000 		.word	hi2c1
 166              		.cfi_endproc
 167              	.LFE42:
 169              		.section	.text.MPU6050_Readbytes,"ax",%progbits
 170              		.align	1
 171              		.global	MPU6050_Readbytes
 172              		.syntax unified
 173              		.code	16
 174              		.thumb_func
 175              		.fpu softvfp
 177              	MPU6050_Readbytes:
 178              	.LVL14:
 179              	.LFB43:
  25:Core/Src/MPU6050.c **** 
  26:Core/Src/MPU6050.c **** void MPU6050_Readbytes(uint8_t reg_addr, uint8_t len, uint8_t* data)
  27:Core/Src/MPU6050.c **** {
 180              		.loc 1 27 1 is_stmt 1 view -0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 0, uses_anonymous_args = 0
 184              		.loc 1 27 1 is_stmt 0 view .LVU21
 185 0000 00B5     		push	{lr}
 186              	.LCFI6:
 187              		.cfi_def_cfa_offset 4
 188              		.cfi_offset 14, -4
 189 0002 85B0     		sub	sp, sp, #20
 190              	.LCFI7:
 191              		.cfi_def_cfa_offset 24
  28:Core/Src/MPU6050.c **** 	HAL_I2C_Mem_Read(&hi2c1, MPU6050_ADDR, reg_addr, I2C_MEMADD_SIZE_8BIT, data, len, 1);
 192              		.loc 1 28 2 is_stmt 1 view .LVU22
 193 0004 0123     		movs	r3, #1
 194 0006 0293     		str	r3, [sp, #8]
 195 0008 0191     		str	r1, [sp, #4]
 196 000a 0092     		str	r2, [sp]
 197 000c 0200     		movs	r2, r0
 198              	.LVL15:
 199              		.loc 1 28 2 is_stmt 0 view .LVU23
 200 000e D021     		movs	r1, #208
 201              	.LVL16:
 202              		.loc 1 28 2 view .LVU24
 203 0010 0248     		ldr	r0, .L11
 204              	.LVL17:
 205              		.loc 1 28 2 view .LVU25
 206 0012 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 207              	.LVL18:
ARM GAS  /tmp/ccA5Tg20.s 			page 5


  29:Core/Src/MPU6050.c **** }
 208              		.loc 1 29 1 view .LVU26
 209 0016 05B0     		add	sp, sp, #20
 210              		@ sp needed
 211 0018 00BD     		pop	{pc}
 212              	.L12:
 213 001a C046     		.align	2
 214              	.L11:
 215 001c 00000000 		.word	hi2c1
 216              		.cfi_endproc
 217              	.LFE43:
 219              		.section	.text.MPU6050_Get6AxisRawData,"ax",%progbits
 220              		.align	1
 221              		.global	MPU6050_Get6AxisRawData
 222              		.syntax unified
 223              		.code	16
 224              		.thumb_func
 225              		.fpu softvfp
 227              	MPU6050_Get6AxisRawData:
 228              	.LVL19:
 229              	.LFB45:
  30:Core/Src/MPU6050.c **** 
  31:Core/Src/MPU6050.c **** void MPU6050_Initialization(void)
  32:Core/Src/MPU6050.c **** {
  33:Core/Src/MPU6050.c **** 	HAL_Delay(50);
  34:Core/Src/MPU6050.c **** 	uint8_t who_am_i = 0;
  35:Core/Src/MPU6050.c **** 	printf("Checking MPU6050...\n");
  36:Core/Src/MPU6050.c **** 
  37:Core/Src/MPU6050.c **** 	MPU6050_Readbyte(MPU6050_WHO_AM_I, &who_am_i);
  38:Core/Src/MPU6050.c **** 	if(who_am_i == 0x68)
  39:Core/Src/MPU6050.c **** 	{
  40:Core/Src/MPU6050.c **** 		printf("MPU6050 who_am_i = 0x%02x...OK\n", who_am_i);
  41:Core/Src/MPU6050.c **** 	}
  42:Core/Src/MPU6050.c **** 	else
  43:Core/Src/MPU6050.c **** 	{
  44:Core/Src/MPU6050.c **** 		printf("ERROR!\n");
  45:Core/Src/MPU6050.c **** 		printf("MPU6050 who_am_i : 0x%02x should be 0x68\n", who_am_i);
  46:Core/Src/MPU6050.c **** 		while(1)
  47:Core/Src/MPU6050.c **** 		{
  48:Core/Src/MPU6050.c **** 			printf("who am i error. Can not recognize mpu6050\n");
  49:Core/Src/MPU6050.c **** 			HAL_Delay(100);
  50:Core/Src/MPU6050.c **** 		}
  51:Core/Src/MPU6050.c **** 	}
  52:Core/Src/MPU6050.c **** 
  53:Core/Src/MPU6050.c **** 	//Reset the whole module before initialization
  54:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_PWR_MGMT_1, 0x1<<7);
  55:Core/Src/MPU6050.c **** 	HAL_Delay(100);
  56:Core/Src/MPU6050.c **** 
  57:Core/Src/MPU6050.c **** 	//Power Management setting
  58:Core/Src/MPU6050.c **** 	/* Default is sleep mode
  59:Core/Src/MPU6050.c **** 	 * necessary to wake up MPU6050*/
  60:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_PWR_MGMT_1, 0x00);
  61:Core/Src/MPU6050.c **** 	HAL_Delay(50);
  62:Core/Src/MPU6050.c **** 
  63:Core/Src/MPU6050.c **** 	//Sample rate divider
  64:Core/Src/MPU6050.c **** 	/*Sample Rate = Gyroscope Output Rate / (1 + SMPRT_DIV) */
  65:Core/Src/MPU6050.c **** 	//	MPU6050_Writebyte(MPU6050_SMPRT_DIV, 0x00); // ACC output rate is 1kHz, GYRO output rate is 8kH
ARM GAS  /tmp/ccA5Tg20.s 			page 6


  66:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_SMPRT_DIV, 39); // Sample Rate = 200Hz
  67:Core/Src/MPU6050.c **** 	HAL_Delay(50);
  68:Core/Src/MPU6050.c **** 
  69:Core/Src/MPU6050.c **** 	//FSYNC and DLPF setting
  70:Core/Src/MPU6050.c **** 	/*DLPF is set to 0*/
  71:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_CONFIG, 0x00);
  72:Core/Src/MPU6050.c **** 	HAL_Delay(50);
  73:Core/Src/MPU6050.c **** 
  74:Core/Src/MPU6050.c **** 	//GYRO FULL SCALE setting
  75:Core/Src/MPU6050.c **** 	/*FS_SEL  Full Scale Range
  76:Core/Src/MPU6050.c **** 	  0    	+-250 degree/s
  77:Core/Src/MPU6050.c **** 	  1		+-500 degree/s
  78:Core/Src/MPU6050.c **** 	  2		+-1000 degree/s
  79:Core/Src/MPU6050.c **** 	  3		+-2000 degree/s	*/
  80:Core/Src/MPU6050.c **** 	uint8_t FS_SCALE_GYRO = 0x0;
  81:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_GYRO_CONFIG, FS_SCALE_GYRO<<3);
  82:Core/Src/MPU6050.c **** 	HAL_Delay(50);
  83:Core/Src/MPU6050.c **** 
  84:Core/Src/MPU6050.c **** 	//ACCEL FULL SCALE setting
  85:Core/Src/MPU6050.c **** 	/*FS_SEL  Full Scale Range
  86:Core/Src/MPU6050.c **** 	  0    	+-2g
  87:Core/Src/MPU6050.c **** 	  1		+-4g
  88:Core/Src/MPU6050.c **** 	  2		+-8g
  89:Core/Src/MPU6050.c **** 	  3		+-16g	*/
  90:Core/Src/MPU6050.c **** 	uint8_t FS_SCALE_ACC = 0x0;
  91:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_ACCEL_CONFIG, FS_SCALE_ACC<<3);
  92:Core/Src/MPU6050.c **** 	HAL_Delay(50);
  93:Core/Src/MPU6050.c **** 
  94:Core/Src/MPU6050.c **** 	MPU6050_Get_LSB_Sensitivity(FS_SCALE_GYRO, FS_SCALE_ACC);
  95:Core/Src/MPU6050.c **** 	//printf("LSB_Sensitivity_GYRO: %lf, LSB_Sensitivity_ACC: %lf\n",LSB_Sensitivity_GYRO, LSB_Sensiti
  96:Core/Src/MPU6050.c **** 
  97:Core/Src/MPU6050.c **** 	//Interrupt PIN setting
  98:Core/Src/MPU6050.c **** 	uint8_t INT_LEVEL = 0x0; //0 - active high, 1 - active low
  99:Core/Src/MPU6050.c **** 	uint8_t LATCH_INT_EN = 0x0; //0 - INT 50us pulse, 1 - interrupt clear required
 100:Core/Src/MPU6050.c **** 	uint8_t INT_RD_CLEAR = 0x1; //0 - INT flag cleared by reading INT_STATUS, 1 - INT flag cleared by 
 101:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_INT_PIN_CFG, (INT_LEVEL<<7)|(LATCH_INT_EN<<5)|(INT_RD_CLEAR<<4)); //
 102:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 103:Core/Src/MPU6050.c **** 
 104:Core/Src/MPU6050.c **** 	//Interrupt enable setting
 105:Core/Src/MPU6050.c **** 	uint8_t DATA_RDY_EN = 0x1; // 1 - enable, 0 - disable
 106:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_INT_ENABLE, DATA_RDY_EN);
 107:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 108:Core/Src/MPU6050.c **** 
 109:Core/Src/MPU6050.c **** 	printf("MPU6050 setting is finished\n");
 110:Core/Src/MPU6050.c **** }
 111:Core/Src/MPU6050.c **** /*Get Raw Data from sensor*/
 112:Core/Src/MPU6050.c **** void MPU6050_Get6AxisRawData(Struct_MPU6050* mpu6050)
 113:Core/Src/MPU6050.c **** {
 230              		.loc 1 113 1 is_stmt 1 view -0
 231              		.cfi_startproc
 232              		@ args = 0, pretend = 0, frame = 16
 233              		@ frame_needed = 0, uses_anonymous_args = 0
 234              		.loc 1 113 1 is_stmt 0 view .LVU28
 235 0000 10B5     		push	{r4, lr}
 236              	.LCFI8:
 237              		.cfi_def_cfa_offset 8
 238              		.cfi_offset 4, -8
ARM GAS  /tmp/ccA5Tg20.s 			page 7


 239              		.cfi_offset 14, -4
 240 0002 84B0     		sub	sp, sp, #16
 241              	.LCFI9:
 242              		.cfi_def_cfa_offset 24
 243 0004 0400     		movs	r4, r0
 114:Core/Src/MPU6050.c **** 	uint8_t data[14];
 244              		.loc 1 114 2 is_stmt 1 view .LVU29
 115:Core/Src/MPU6050.c **** 	MPU6050_Readbytes(MPU6050_ACCEL_XOUT_H, 14, data);
 245              		.loc 1 115 2 view .LVU30
 246 0006 6A46     		mov	r2, sp
 247 0008 0E21     		movs	r1, #14
 248 000a 3B20     		movs	r0, #59
 249              	.LVL20:
 250              		.loc 1 115 2 is_stmt 0 view .LVU31
 251 000c FFF7FEFF 		bl	MPU6050_Readbytes
 252              	.LVL21:
 116:Core/Src/MPU6050.c **** 
 117:Core/Src/MPU6050.c **** 	mpu6050->acc_x_raw = (data[0] << 8) | data[1];
 253              		.loc 1 117 2 is_stmt 1 view .LVU32
 254              		.loc 1 117 28 is_stmt 0 view .LVU33
 255 0010 6B46     		mov	r3, sp
 256 0012 1A78     		ldrb	r2, [r3]
 257              		.loc 1 117 32 view .LVU34
 258 0014 1202     		lsls	r2, r2, #8
 259              		.loc 1 117 44 view .LVU35
 260 0016 5B78     		ldrb	r3, [r3, #1]
 261              		.loc 1 117 38 view .LVU36
 262 0018 1343     		orrs	r3, r2
 263              		.loc 1 117 21 view .LVU37
 264 001a 2380     		strh	r3, [r4]
 118:Core/Src/MPU6050.c **** 	mpu6050->acc_y_raw = (data[2] << 8) | data[3];
 265              		.loc 1 118 2 is_stmt 1 view .LVU38
 266              		.loc 1 118 28 is_stmt 0 view .LVU39
 267 001c 6B46     		mov	r3, sp
 268 001e 9A78     		ldrb	r2, [r3, #2]
 269              		.loc 1 118 32 view .LVU40
 270 0020 1202     		lsls	r2, r2, #8
 271              		.loc 1 118 44 view .LVU41
 272 0022 DB78     		ldrb	r3, [r3, #3]
 273              		.loc 1 118 38 view .LVU42
 274 0024 1343     		orrs	r3, r2
 275              		.loc 1 118 21 view .LVU43
 276 0026 6380     		strh	r3, [r4, #2]
 119:Core/Src/MPU6050.c **** 	mpu6050->acc_z_raw = (data[4] << 8) | data[5];
 277              		.loc 1 119 2 is_stmt 1 view .LVU44
 278              		.loc 1 119 28 is_stmt 0 view .LVU45
 279 0028 6B46     		mov	r3, sp
 280 002a 1A79     		ldrb	r2, [r3, #4]
 281              		.loc 1 119 32 view .LVU46
 282 002c 1202     		lsls	r2, r2, #8
 283              		.loc 1 119 44 view .LVU47
 284 002e 5B79     		ldrb	r3, [r3, #5]
 285              		.loc 1 119 38 view .LVU48
 286 0030 1343     		orrs	r3, r2
 287              		.loc 1 119 21 view .LVU49
 288 0032 A380     		strh	r3, [r4, #4]
 120:Core/Src/MPU6050.c **** 
ARM GAS  /tmp/ccA5Tg20.s 			page 8


 121:Core/Src/MPU6050.c **** 	mpu6050->temperature_raw = (data[6] << 8) | data[7];
 289              		.loc 1 121 2 is_stmt 1 view .LVU50
 290              		.loc 1 121 34 is_stmt 0 view .LVU51
 291 0034 6B46     		mov	r3, sp
 292 0036 9A79     		ldrb	r2, [r3, #6]
 293              		.loc 1 121 38 view .LVU52
 294 0038 1202     		lsls	r2, r2, #8
 295              		.loc 1 121 50 view .LVU53
 296 003a DB79     		ldrb	r3, [r3, #7]
 297              		.loc 1 121 44 view .LVU54
 298 003c 1343     		orrs	r3, r2
 299              		.loc 1 121 27 view .LVU55
 300 003e E380     		strh	r3, [r4, #6]
 122:Core/Src/MPU6050.c **** 
 123:Core/Src/MPU6050.c **** 	mpu6050->gyro_x_raw = ((data[8] << 8) | data[9]);
 301              		.loc 1 123 2 is_stmt 1 view .LVU56
 302              		.loc 1 123 30 is_stmt 0 view .LVU57
 303 0040 6B46     		mov	r3, sp
 304 0042 1A7A     		ldrb	r2, [r3, #8]
 305              		.loc 1 123 34 view .LVU58
 306 0044 1202     		lsls	r2, r2, #8
 307              		.loc 1 123 46 view .LVU59
 308 0046 5B7A     		ldrb	r3, [r3, #9]
 309              		.loc 1 123 40 view .LVU60
 310 0048 1343     		orrs	r3, r2
 311              		.loc 1 123 22 view .LVU61
 312 004a 2381     		strh	r3, [r4, #8]
 124:Core/Src/MPU6050.c **** 	mpu6050->gyro_y_raw = ((data[10] << 8) | data[11]);
 313              		.loc 1 124 2 is_stmt 1 view .LVU62
 314              		.loc 1 124 30 is_stmt 0 view .LVU63
 315 004c 6B46     		mov	r3, sp
 316 004e 9A7A     		ldrb	r2, [r3, #10]
 317              		.loc 1 124 35 view .LVU64
 318 0050 1202     		lsls	r2, r2, #8
 319              		.loc 1 124 47 view .LVU65
 320 0052 DB7A     		ldrb	r3, [r3, #11]
 321              		.loc 1 124 41 view .LVU66
 322 0054 1343     		orrs	r3, r2
 323              		.loc 1 124 22 view .LVU67
 324 0056 6381     		strh	r3, [r4, #10]
 125:Core/Src/MPU6050.c **** 	mpu6050->gyro_z_raw = ((data[12] << 8) | data[13]);
 325              		.loc 1 125 2 is_stmt 1 view .LVU68
 326              		.loc 1 125 30 is_stmt 0 view .LVU69
 327 0058 6B46     		mov	r3, sp
 328 005a 1A7B     		ldrb	r2, [r3, #12]
 329              		.loc 1 125 35 view .LVU70
 330 005c 1202     		lsls	r2, r2, #8
 331              		.loc 1 125 47 view .LVU71
 332 005e 5B7B     		ldrb	r3, [r3, #13]
 333              		.loc 1 125 41 view .LVU72
 334 0060 1343     		orrs	r3, r2
 335              		.loc 1 125 22 view .LVU73
 336 0062 A381     		strh	r3, [r4, #12]
 126:Core/Src/MPU6050.c **** }
 337              		.loc 1 126 1 view .LVU74
 338 0064 04B0     		add	sp, sp, #16
 339              		@ sp needed
ARM GAS  /tmp/ccA5Tg20.s 			page 9


 340              	.LVL22:
 341              		.loc 1 126 1 view .LVU75
 342 0066 10BD     		pop	{r4, pc}
 343              		.cfi_endproc
 344              	.LFE45:
 346              		.section	.text.MPU6050_Get_LSB_Sensitivity,"ax",%progbits
 347              		.align	1
 348              		.global	MPU6050_Get_LSB_Sensitivity
 349              		.syntax unified
 350              		.code	16
 351              		.thumb_func
 352              		.fpu softvfp
 354              	MPU6050_Get_LSB_Sensitivity:
 355              	.LVL23:
 356              	.LFB46:
 127:Core/Src/MPU6050.c **** 
 128:Core/Src/MPU6050.c **** void MPU6050_Get_LSB_Sensitivity(uint8_t FS_SCALE_GYRO, uint8_t FS_SCALE_ACC)
 129:Core/Src/MPU6050.c **** {
 357              		.loc 1 129 1 is_stmt 1 view -0
 358              		.cfi_startproc
 359              		@ args = 0, pretend = 0, frame = 0
 360              		@ frame_needed = 0, uses_anonymous_args = 0
 361              		@ link register save eliminated.
 130:Core/Src/MPU6050.c **** 	
 131:Core/Src/MPU6050.c **** 	switch(FS_SCALE_GYRO)
 362              		.loc 1 131 2 view .LVU77
 363 0000 0228     		cmp	r0, #2
 364 0002 1DD0     		beq	.L15
 365 0004 07D8     		bhi	.L16
 366 0006 0028     		cmp	r0, #0
 367 0008 0BD0     		beq	.L17
 368 000a 0128     		cmp	r0, #1
 369 000c 0CD1     		bne	.L19
 132:Core/Src/MPU6050.c **** 	{
 133:Core/Src/MPU6050.c **** 	case 0:
 134:Core/Src/MPU6050.c **** 		LSB_Sensitivity_GYRO = 131.f;
 135:Core/Src/MPU6050.c **** 		break;
 136:Core/Src/MPU6050.c **** 	case 1:
 137:Core/Src/MPU6050.c **** 		LSB_Sensitivity_GYRO = 65.5f;
 370              		.loc 1 137 3 view .LVU78
 371              		.loc 1 137 24 is_stmt 0 view .LVU79
 372 000e 174B     		ldr	r3, .L27
 373 0010 174A     		ldr	r2, .L27+4
 374 0012 1A60     		str	r2, [r3]
 138:Core/Src/MPU6050.c **** 		break;
 375              		.loc 1 138 3 is_stmt 1 view .LVU80
 376 0014 08E0     		b	.L19
 377              	.L16:
 131:Core/Src/MPU6050.c **** 	{
 378              		.loc 1 131 2 is_stmt 0 view .LVU81
 379 0016 0328     		cmp	r0, #3
 380 0018 06D1     		bne	.L19
 139:Core/Src/MPU6050.c **** 	case 2:
 140:Core/Src/MPU6050.c **** 		LSB_Sensitivity_GYRO = 32.8f;
 141:Core/Src/MPU6050.c **** 		break;
 142:Core/Src/MPU6050.c **** 	case 3:
 143:Core/Src/MPU6050.c **** 		LSB_Sensitivity_GYRO = 16.4f;
ARM GAS  /tmp/ccA5Tg20.s 			page 10


 381              		.loc 1 143 3 is_stmt 1 view .LVU82
 382              		.loc 1 143 24 is_stmt 0 view .LVU83
 383 001a 144B     		ldr	r3, .L27
 384 001c 154A     		ldr	r2, .L27+8
 385 001e 1A60     		str	r2, [r3]
 144:Core/Src/MPU6050.c **** 		break;
 386              		.loc 1 144 3 is_stmt 1 view .LVU84
 387 0020 02E0     		b	.L19
 388              	.L17:
 134:Core/Src/MPU6050.c **** 		break;
 389              		.loc 1 134 3 view .LVU85
 134:Core/Src/MPU6050.c **** 		break;
 390              		.loc 1 134 24 is_stmt 0 view .LVU86
 391 0022 124B     		ldr	r3, .L27
 392 0024 144A     		ldr	r2, .L27+12
 393 0026 1A60     		str	r2, [r3]
 135:Core/Src/MPU6050.c **** 	case 1:
 394              		.loc 1 135 3 is_stmt 1 view .LVU87
 395              	.L19:
 145:Core/Src/MPU6050.c **** 	}
 146:Core/Src/MPU6050.c **** 	switch(FS_SCALE_ACC)
 396              		.loc 1 146 2 view .LVU88
 397 0028 0229     		cmp	r1, #2
 398 002a 19D0     		beq	.L21
 399 002c 0CD8     		bhi	.L22
 400 002e 0029     		cmp	r1, #0
 401 0030 11D0     		beq	.L23
 402 0032 0129     		cmp	r1, #1
 403 0034 13D1     		bne	.L14
 147:Core/Src/MPU6050.c **** 	{
 148:Core/Src/MPU6050.c **** 	case 0:
 149:Core/Src/MPU6050.c **** 		LSB_Sensitivity_ACC = 16384.f;
 150:Core/Src/MPU6050.c **** 		break;
 151:Core/Src/MPU6050.c **** 	case 1:
 152:Core/Src/MPU6050.c **** 		LSB_Sensitivity_ACC = 8192.f;
 404              		.loc 1 152 3 view .LVU89
 405              		.loc 1 152 23 is_stmt 0 view .LVU90
 406 0036 114B     		ldr	r3, .L27+16
 407 0038 8C22     		movs	r2, #140
 408 003a D205     		lsls	r2, r2, #23
 409 003c 1A60     		str	r2, [r3]
 153:Core/Src/MPU6050.c **** 		break;
 410              		.loc 1 153 3 is_stmt 1 view .LVU91
 411 003e 0EE0     		b	.L14
 412              	.L15:
 140:Core/Src/MPU6050.c **** 		break;
 413              		.loc 1 140 3 view .LVU92
 140:Core/Src/MPU6050.c **** 		break;
 414              		.loc 1 140 24 is_stmt 0 view .LVU93
 415 0040 0A4B     		ldr	r3, .L27
 416 0042 0F4A     		ldr	r2, .L27+20
 417 0044 1A60     		str	r2, [r3]
 141:Core/Src/MPU6050.c **** 	case 3:
 418              		.loc 1 141 3 is_stmt 1 view .LVU94
 419 0046 EFE7     		b	.L19
 420              	.L22:
 146:Core/Src/MPU6050.c **** 	{
ARM GAS  /tmp/ccA5Tg20.s 			page 11


 421              		.loc 1 146 2 is_stmt 0 view .LVU95
 422 0048 0329     		cmp	r1, #3
 423 004a 08D1     		bne	.L14
 154:Core/Src/MPU6050.c **** 	case 2:
 155:Core/Src/MPU6050.c **** 		LSB_Sensitivity_ACC = 4096.f;
 156:Core/Src/MPU6050.c **** 		break;
 157:Core/Src/MPU6050.c **** 	case 3:
 158:Core/Src/MPU6050.c **** 		LSB_Sensitivity_ACC = 2048.f;
 424              		.loc 1 158 3 is_stmt 1 view .LVU96
 425              		.loc 1 158 23 is_stmt 0 view .LVU97
 426 004c 0B4B     		ldr	r3, .L27+16
 427 004e 8A22     		movs	r2, #138
 428 0050 D205     		lsls	r2, r2, #23
 429 0052 1A60     		str	r2, [r3]
 159:Core/Src/MPU6050.c **** 		break;
 430              		.loc 1 159 3 is_stmt 1 view .LVU98
 160:Core/Src/MPU6050.c **** 	}
 161:Core/Src/MPU6050.c **** }
 431              		.loc 1 161 1 is_stmt 0 view .LVU99
 432 0054 03E0     		b	.L14
 433              	.L23:
 149:Core/Src/MPU6050.c **** 		break;
 434              		.loc 1 149 3 is_stmt 1 view .LVU100
 149:Core/Src/MPU6050.c **** 		break;
 435              		.loc 1 149 23 is_stmt 0 view .LVU101
 436 0056 094B     		ldr	r3, .L27+16
 437 0058 8D22     		movs	r2, #141
 438 005a D205     		lsls	r2, r2, #23
 439 005c 1A60     		str	r2, [r3]
 150:Core/Src/MPU6050.c **** 	case 1:
 440              		.loc 1 150 3 is_stmt 1 view .LVU102
 441              	.L14:
 442              		.loc 1 161 1 is_stmt 0 view .LVU103
 443              		@ sp needed
 444 005e 7047     		bx	lr
 445              	.L21:
 155:Core/Src/MPU6050.c **** 		break;
 446              		.loc 1 155 3 is_stmt 1 view .LVU104
 155:Core/Src/MPU6050.c **** 		break;
 447              		.loc 1 155 23 is_stmt 0 view .LVU105
 448 0060 064B     		ldr	r3, .L27+16
 449 0062 8B22     		movs	r2, #139
 450 0064 D205     		lsls	r2, r2, #23
 451 0066 1A60     		str	r2, [r3]
 156:Core/Src/MPU6050.c **** 	case 3:
 452              		.loc 1 156 3 is_stmt 1 view .LVU106
 453 0068 F9E7     		b	.L14
 454              	.L28:
 455 006a C046     		.align	2
 456              	.L27:
 457 006c 00000000 		.word	.LANCHOR0
 458 0070 00008342 		.word	1115881472
 459 0074 33338341 		.word	1099117363
 460 0078 00000343 		.word	1124270080
 461 007c 00000000 		.word	.LANCHOR1
 462 0080 33330342 		.word	1107505971
 463              		.cfi_endproc
ARM GAS  /tmp/ccA5Tg20.s 			page 12


 464              	.LFE46:
 466              		.section	.rodata.MPU6050_Initialization.str1.4,"aMS",%progbits,1
 467              		.align	2
 468              	.LC6:
 469 0000 43686563 		.ascii	"Checking MPU6050...\000"
 469      6B696E67 
 469      204D5055 
 469      36303530 
 469      2E2E2E00 
 470              		.align	2
 471              	.LC8:
 472 0014 4D505536 		.ascii	"MPU6050 who_am_i = 0x%02x...OK\012\000"
 472      30353020 
 472      77686F5F 
 472      616D5F69 
 472      203D2030 
 473              		.align	2
 474              	.LC10:
 475 0034 4D505536 		.ascii	"MPU6050 setting is finished\000"
 475      30353020 
 475      73657474 
 475      696E6720 
 475      69732066 
 476              		.align	2
 477              	.LC12:
 478 0050 4552524F 		.ascii	"ERROR!\000"
 478      522100
 479 0057 00       		.align	2
 480              	.LC14:
 481 0058 4D505536 		.ascii	"MPU6050 who_am_i : 0x%02x should be 0x68\012\000"
 481      30353020 
 481      77686F5F 
 481      616D5F69 
 481      203A2030 
 482 0082 0000     		.align	2
 483              	.LC16:
 484 0084 77686F20 		.ascii	"who am i error. Can not recognize mpu6050\000"
 484      616D2069 
 484      20657272 
 484      6F722E20 
 484      43616E20 
 485              		.section	.text.MPU6050_Initialization,"ax",%progbits
 486              		.align	1
 487              		.global	MPU6050_Initialization
 488              		.syntax unified
 489              		.code	16
 490              		.thumb_func
 491              		.fpu softvfp
 493              	MPU6050_Initialization:
 494              	.LFB44:
  32:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 495              		.loc 1 32 1 view -0
 496              		.cfi_startproc
 497              		@ args = 0, pretend = 0, frame = 8
 498              		@ frame_needed = 0, uses_anonymous_args = 0
 499 0000 00B5     		push	{lr}
 500              	.LCFI10:
ARM GAS  /tmp/ccA5Tg20.s 			page 13


 501              		.cfi_def_cfa_offset 4
 502              		.cfi_offset 14, -4
 503 0002 83B0     		sub	sp, sp, #12
 504              	.LCFI11:
 505              		.cfi_def_cfa_offset 16
  33:Core/Src/MPU6050.c **** 	uint8_t who_am_i = 0;
 506              		.loc 1 33 2 view .LVU108
 507 0004 3220     		movs	r0, #50
 508 0006 FFF7FEFF 		bl	HAL_Delay
 509              	.LVL24:
  34:Core/Src/MPU6050.c **** 	printf("Checking MPU6050...\n");
 510              		.loc 1 34 2 view .LVU109
  34:Core/Src/MPU6050.c **** 	printf("Checking MPU6050...\n");
 511              		.loc 1 34 10 is_stmt 0 view .LVU110
 512 000a 0023     		movs	r3, #0
 513 000c 6A46     		mov	r2, sp
 514 000e D371     		strb	r3, [r2, #7]
  35:Core/Src/MPU6050.c **** 
 515              		.loc 1 35 2 is_stmt 1 view .LVU111
 516 0010 2F48     		ldr	r0, .L34
 517 0012 FFF7FEFF 		bl	puts
 518              	.LVL25:
  37:Core/Src/MPU6050.c **** 	if(who_am_i == 0x68)
 519              		.loc 1 37 2 view .LVU112
 520 0016 6B46     		mov	r3, sp
 521 0018 D91D     		adds	r1, r3, #7
 522 001a 7520     		movs	r0, #117
 523 001c FFF7FEFF 		bl	MPU6050_Readbyte
 524              	.LVL26:
  38:Core/Src/MPU6050.c **** 	{
 525              		.loc 1 38 2 view .LVU113
  38:Core/Src/MPU6050.c **** 	{
 526              		.loc 1 38 14 is_stmt 0 view .LVU114
 527 0020 6B46     		mov	r3, sp
 528 0022 D979     		ldrb	r1, [r3, #7]
  38:Core/Src/MPU6050.c **** 	{
 529              		.loc 1 38 4 view .LVU115
 530 0024 6829     		cmp	r1, #104
 531 0026 0ED0     		beq	.L33
  44:Core/Src/MPU6050.c **** 		printf("MPU6050 who_am_i : 0x%02x should be 0x68\n", who_am_i);
 532              		.loc 1 44 3 is_stmt 1 view .LVU116
 533 0028 2A48     		ldr	r0, .L34+4
 534 002a FFF7FEFF 		bl	puts
 535              	.LVL27:
  45:Core/Src/MPU6050.c **** 		while(1)
 536              		.loc 1 45 3 view .LVU117
 537 002e 6B46     		mov	r3, sp
 538 0030 D979     		ldrb	r1, [r3, #7]
 539 0032 2948     		ldr	r0, .L34+8
 540 0034 FFF7FEFF 		bl	printf
 541              	.LVL28:
 542              	.L31:
  46:Core/Src/MPU6050.c **** 		{
 543              		.loc 1 46 3 discriminator 1 view .LVU118
  48:Core/Src/MPU6050.c **** 			HAL_Delay(100);
 544              		.loc 1 48 4 discriminator 1 view .LVU119
 545 0038 2848     		ldr	r0, .L34+12
ARM GAS  /tmp/ccA5Tg20.s 			page 14


 546 003a FFF7FEFF 		bl	puts
 547              	.LVL29:
  49:Core/Src/MPU6050.c **** 		}
 548              		.loc 1 49 4 discriminator 1 view .LVU120
 549 003e 6420     		movs	r0, #100
 550 0040 FFF7FEFF 		bl	HAL_Delay
 551              	.LVL30:
  46:Core/Src/MPU6050.c **** 		{
 552              		.loc 1 46 8 discriminator 1 view .LVU121
 553 0044 F8E7     		b	.L31
 554              	.L33:
  40:Core/Src/MPU6050.c **** 	}
 555              		.loc 1 40 3 view .LVU122
 556 0046 2648     		ldr	r0, .L34+16
 557 0048 FFF7FEFF 		bl	printf
 558              	.LVL31:
  54:Core/Src/MPU6050.c **** 	HAL_Delay(100);
 559              		.loc 1 54 2 view .LVU123
 560 004c 8021     		movs	r1, #128
 561 004e 6B20     		movs	r0, #107
 562 0050 FFF7FEFF 		bl	MPU6050_Writebyte
 563              	.LVL32:
  55:Core/Src/MPU6050.c **** 
 564              		.loc 1 55 2 view .LVU124
 565 0054 6420     		movs	r0, #100
 566 0056 FFF7FEFF 		bl	HAL_Delay
 567              	.LVL33:
  60:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 568              		.loc 1 60 2 view .LVU125
 569 005a 0021     		movs	r1, #0
 570 005c 6B20     		movs	r0, #107
 571 005e FFF7FEFF 		bl	MPU6050_Writebyte
 572              	.LVL34:
  61:Core/Src/MPU6050.c **** 
 573              		.loc 1 61 2 view .LVU126
 574 0062 3220     		movs	r0, #50
 575 0064 FFF7FEFF 		bl	HAL_Delay
 576              	.LVL35:
  66:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 577              		.loc 1 66 2 view .LVU127
 578 0068 2721     		movs	r1, #39
 579 006a 1920     		movs	r0, #25
 580 006c FFF7FEFF 		bl	MPU6050_Writebyte
 581              	.LVL36:
  67:Core/Src/MPU6050.c **** 
 582              		.loc 1 67 2 view .LVU128
 583 0070 3220     		movs	r0, #50
 584 0072 FFF7FEFF 		bl	HAL_Delay
 585              	.LVL37:
  71:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 586              		.loc 1 71 2 view .LVU129
 587 0076 0021     		movs	r1, #0
 588 0078 1A20     		movs	r0, #26
 589 007a FFF7FEFF 		bl	MPU6050_Writebyte
 590              	.LVL38:
  72:Core/Src/MPU6050.c **** 
 591              		.loc 1 72 2 view .LVU130
ARM GAS  /tmp/ccA5Tg20.s 			page 15


 592 007e 3220     		movs	r0, #50
 593 0080 FFF7FEFF 		bl	HAL_Delay
 594              	.LVL39:
  80:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_GYRO_CONFIG, FS_SCALE_GYRO<<3);
 595              		.loc 1 80 2 view .LVU131
  81:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 596              		.loc 1 81 2 view .LVU132
 597 0084 0021     		movs	r1, #0
 598 0086 1B20     		movs	r0, #27
 599 0088 FFF7FEFF 		bl	MPU6050_Writebyte
 600              	.LVL40:
  82:Core/Src/MPU6050.c **** 
 601              		.loc 1 82 2 view .LVU133
 602 008c 3220     		movs	r0, #50
 603 008e FFF7FEFF 		bl	HAL_Delay
 604              	.LVL41:
  90:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_ACCEL_CONFIG, FS_SCALE_ACC<<3);
 605              		.loc 1 90 2 view .LVU134
  91:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 606              		.loc 1 91 2 view .LVU135
 607 0092 0021     		movs	r1, #0
 608 0094 1C20     		movs	r0, #28
 609 0096 FFF7FEFF 		bl	MPU6050_Writebyte
 610              	.LVL42:
  92:Core/Src/MPU6050.c **** 
 611              		.loc 1 92 2 view .LVU136
 612 009a 3220     		movs	r0, #50
 613 009c FFF7FEFF 		bl	HAL_Delay
 614              	.LVL43:
  94:Core/Src/MPU6050.c **** 	//printf("LSB_Sensitivity_GYRO: %lf, LSB_Sensitivity_ACC: %lf\n",LSB_Sensitivity_GYRO, LSB_Sensiti
 615              		.loc 1 94 2 view .LVU137
 616 00a0 0021     		movs	r1, #0
 617 00a2 0020     		movs	r0, #0
 618 00a4 FFF7FEFF 		bl	MPU6050_Get_LSB_Sensitivity
 619              	.LVL44:
  98:Core/Src/MPU6050.c **** 	uint8_t LATCH_INT_EN = 0x0; //0 - INT 50us pulse, 1 - interrupt clear required
 620              		.loc 1 98 2 view .LVU138
  99:Core/Src/MPU6050.c **** 	uint8_t INT_RD_CLEAR = 0x1; //0 - INT flag cleared by reading INT_STATUS, 1 - INT flag cleared by 
 621              		.loc 1 99 2 view .LVU139
 100:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_INT_PIN_CFG, (INT_LEVEL<<7)|(LATCH_INT_EN<<5)|(INT_RD_CLEAR<<4)); //
 622              		.loc 1 100 2 view .LVU140
 101:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 623              		.loc 1 101 2 view .LVU141
 624 00a8 1021     		movs	r1, #16
 625 00aa 3720     		movs	r0, #55
 626 00ac FFF7FEFF 		bl	MPU6050_Writebyte
 627              	.LVL45:
 102:Core/Src/MPU6050.c **** 
 628              		.loc 1 102 2 view .LVU142
 629 00b0 3220     		movs	r0, #50
 630 00b2 FFF7FEFF 		bl	HAL_Delay
 631              	.LVL46:
 105:Core/Src/MPU6050.c **** 	MPU6050_Writebyte(MPU6050_INT_ENABLE, DATA_RDY_EN);
 632              		.loc 1 105 2 view .LVU143
 106:Core/Src/MPU6050.c **** 	HAL_Delay(50);
 633              		.loc 1 106 2 view .LVU144
 634 00b6 0121     		movs	r1, #1
ARM GAS  /tmp/ccA5Tg20.s 			page 16


 635 00b8 3820     		movs	r0, #56
 636 00ba FFF7FEFF 		bl	MPU6050_Writebyte
 637              	.LVL47:
 107:Core/Src/MPU6050.c **** 
 638              		.loc 1 107 2 view .LVU145
 639 00be 3220     		movs	r0, #50
 640 00c0 FFF7FEFF 		bl	HAL_Delay
 641              	.LVL48:
 109:Core/Src/MPU6050.c **** }
 642              		.loc 1 109 2 view .LVU146
 643 00c4 0748     		ldr	r0, .L34+20
 644 00c6 FFF7FEFF 		bl	puts
 645              	.LVL49:
 110:Core/Src/MPU6050.c **** /*Get Raw Data from sensor*/
 646              		.loc 1 110 1 is_stmt 0 view .LVU147
 647 00ca 03B0     		add	sp, sp, #12
 648              		@ sp needed
 649 00cc 00BD     		pop	{pc}
 650              	.L35:
 651 00ce C046     		.align	2
 652              	.L34:
 653 00d0 00000000 		.word	.LC6
 654 00d4 50000000 		.word	.LC12
 655 00d8 58000000 		.word	.LC14
 656 00dc 84000000 		.word	.LC16
 657 00e0 14000000 		.word	.LC8
 658 00e4 34000000 		.word	.LC10
 659              		.cfi_endproc
 660              	.LFE44:
 662              		.global	__aeabi_i2f
 663              		.global	__aeabi_fdiv
 664              		.global	__aeabi_f2d
 665              		.global	__aeabi_dadd
 666              		.global	__aeabi_d2f
 667              		.section	.text.MPU6050_DataConvert,"ax",%progbits
 668              		.align	1
 669              		.global	MPU6050_DataConvert
 670              		.syntax unified
 671              		.code	16
 672              		.thumb_func
 673              		.fpu softvfp
 675              	MPU6050_DataConvert:
 676              	.LVL50:
 677              	.LFB47:
 162:Core/Src/MPU6050.c **** 
 163:Core/Src/MPU6050.c **** /*Convert Unit. acc_raw -> g, gyro_raw -> degree per second*/
 164:Core/Src/MPU6050.c **** void MPU6050_DataConvert(Struct_MPU6050* mpu6050)
 165:Core/Src/MPU6050.c **** {
 678              		.loc 1 165 1 is_stmt 1 view -0
 679              		.cfi_startproc
 680              		@ args = 0, pretend = 0, frame = 0
 681              		@ frame_needed = 0, uses_anonymous_args = 0
 682              		.loc 1 165 1 is_stmt 0 view .LVU149
 683 0000 70B5     		push	{r4, r5, r6, lr}
 684              	.LCFI12:
 685              		.cfi_def_cfa_offset 16
 686              		.cfi_offset 4, -16
ARM GAS  /tmp/ccA5Tg20.s 			page 17


 687              		.cfi_offset 5, -12
 688              		.cfi_offset 6, -8
 689              		.cfi_offset 14, -4
 690 0002 0400     		movs	r4, r0
 166:Core/Src/MPU6050.c **** 	//printf("LSB_Sensitivity_GYRO: %f, LSB_Sensitivity_ACC: %f\n",LSB_Sensitivity_GYRO,LSB_Sensitivit
 167:Core/Src/MPU6050.c **** 	mpu6050->acc_x = mpu6050->acc_x_raw / LSB_Sensitivity_ACC;
 691              		.loc 1 167 2 is_stmt 1 view .LVU150
 692              		.loc 1 167 26 is_stmt 0 view .LVU151
 693 0004 0023     		movs	r3, #0
 694 0006 C05E     		ldrsh	r0, [r0, r3]
 695              	.LVL51:
 696              		.loc 1 167 38 view .LVU152
 697 0008 214B     		ldr	r3, .L37
 698 000a 1D68     		ldr	r5, [r3]
 699 000c FFF7FEFF 		bl	__aeabi_i2f
 700              	.LVL52:
 701 0010 291C     		adds	r1, r5, #0
 702 0012 FFF7FEFF 		bl	__aeabi_fdiv
 703              	.LVL53:
 704              		.loc 1 167 17 view .LVU153
 705 0016 2061     		str	r0, [r4, #16]
 168:Core/Src/MPU6050.c **** 	mpu6050->acc_y = mpu6050->acc_y_raw / LSB_Sensitivity_ACC;
 706              		.loc 1 168 2 is_stmt 1 view .LVU154
 707              		.loc 1 168 26 is_stmt 0 view .LVU155
 708 0018 0223     		movs	r3, #2
 709 001a E05E     		ldrsh	r0, [r4, r3]
 710              		.loc 1 168 38 view .LVU156
 711 001c FFF7FEFF 		bl	__aeabi_i2f
 712              	.LVL54:
 713 0020 291C     		adds	r1, r5, #0
 714 0022 FFF7FEFF 		bl	__aeabi_fdiv
 715              	.LVL55:
 716              		.loc 1 168 17 view .LVU157
 717 0026 6061     		str	r0, [r4, #20]
 169:Core/Src/MPU6050.c **** 	mpu6050->acc_z = mpu6050->acc_z_raw / LSB_Sensitivity_ACC;
 718              		.loc 1 169 2 is_stmt 1 view .LVU158
 719              		.loc 1 169 26 is_stmt 0 view .LVU159
 720 0028 0423     		movs	r3, #4
 721 002a E05E     		ldrsh	r0, [r4, r3]
 722              		.loc 1 169 38 view .LVU160
 723 002c FFF7FEFF 		bl	__aeabi_i2f
 724              	.LVL56:
 725 0030 291C     		adds	r1, r5, #0
 726 0032 FFF7FEFF 		bl	__aeabi_fdiv
 727              	.LVL57:
 728              		.loc 1 169 17 view .LVU161
 729 0036 A061     		str	r0, [r4, #24]
 170:Core/Src/MPU6050.c **** 
 171:Core/Src/MPU6050.c **** 	mpu6050->temperature = (float)(mpu6050->temperature_raw)/340+36.53;
 730              		.loc 1 171 2 is_stmt 1 view .LVU162
 731              		.loc 1 171 40 is_stmt 0 view .LVU163
 732 0038 0623     		movs	r3, #6
 733 003a E05E     		ldrsh	r0, [r4, r3]
 734              		.loc 1 171 25 view .LVU164
 735 003c FFF7FEFF 		bl	__aeabi_i2f
 736              	.LVL58:
 737              		.loc 1 171 58 view .LVU165
ARM GAS  /tmp/ccA5Tg20.s 			page 18


 738 0040 1449     		ldr	r1, .L37+4
 739 0042 FFF7FEFF 		bl	__aeabi_fdiv
 740              	.LVL59:
 741 0046 FFF7FEFF 		bl	__aeabi_f2d
 742              	.LVL60:
 743              		.loc 1 171 62 view .LVU166
 744 004a 134A     		ldr	r2, .L37+8
 745 004c 134B     		ldr	r3, .L37+12
 746 004e FFF7FEFF 		bl	__aeabi_dadd
 747              	.LVL61:
 748 0052 FFF7FEFF 		bl	__aeabi_d2f
 749              	.LVL62:
 750              		.loc 1 171 23 view .LVU167
 751 0056 E061     		str	r0, [r4, #28]
 172:Core/Src/MPU6050.c **** 
 173:Core/Src/MPU6050.c **** 	mpu6050->gyro_x = mpu6050->gyro_x_raw / LSB_Sensitivity_GYRO;
 752              		.loc 1 173 2 is_stmt 1 view .LVU168
 753              		.loc 1 173 27 is_stmt 0 view .LVU169
 754 0058 0823     		movs	r3, #8
 755 005a E05E     		ldrsh	r0, [r4, r3]
 756              		.loc 1 173 40 view .LVU170
 757 005c 104B     		ldr	r3, .L37+16
 758 005e 1D68     		ldr	r5, [r3]
 759 0060 FFF7FEFF 		bl	__aeabi_i2f
 760              	.LVL63:
 761 0064 291C     		adds	r1, r5, #0
 762 0066 FFF7FEFF 		bl	__aeabi_fdiv
 763              	.LVL64:
 764              		.loc 1 173 18 view .LVU171
 765 006a 2062     		str	r0, [r4, #32]
 174:Core/Src/MPU6050.c **** 	mpu6050->gyro_y = mpu6050->gyro_y_raw / LSB_Sensitivity_GYRO;
 766              		.loc 1 174 2 is_stmt 1 view .LVU172
 767              		.loc 1 174 27 is_stmt 0 view .LVU173
 768 006c 0A23     		movs	r3, #10
 769 006e E05E     		ldrsh	r0, [r4, r3]
 770              		.loc 1 174 40 view .LVU174
 771 0070 FFF7FEFF 		bl	__aeabi_i2f
 772              	.LVL65:
 773 0074 291C     		adds	r1, r5, #0
 774 0076 FFF7FEFF 		bl	__aeabi_fdiv
 775              	.LVL66:
 776              		.loc 1 174 18 view .LVU175
 777 007a 6062     		str	r0, [r4, #36]
 175:Core/Src/MPU6050.c **** 	mpu6050->gyro_z = mpu6050->gyro_z_raw / LSB_Sensitivity_GYRO;
 778              		.loc 1 175 2 is_stmt 1 view .LVU176
 779              		.loc 1 175 27 is_stmt 0 view .LVU177
 780 007c 0C23     		movs	r3, #12
 781 007e E05E     		ldrsh	r0, [r4, r3]
 782              		.loc 1 175 40 view .LVU178
 783 0080 FFF7FEFF 		bl	__aeabi_i2f
 784              	.LVL67:
 785 0084 291C     		adds	r1, r5, #0
 786 0086 FFF7FEFF 		bl	__aeabi_fdiv
 787              	.LVL68:
 788              		.loc 1 175 18 view .LVU179
 789 008a A062     		str	r0, [r4, #40]
 176:Core/Src/MPU6050.c **** }
ARM GAS  /tmp/ccA5Tg20.s 			page 19


 790              		.loc 1 176 1 view .LVU180
 791              		@ sp needed
 792              	.LVL69:
 793              		.loc 1 176 1 view .LVU181
 794 008c 70BD     		pop	{r4, r5, r6, pc}
 795              	.L38:
 796 008e C046     		.align	2
 797              	.L37:
 798 0090 00000000 		.word	.LANCHOR1
 799 0094 0000AA43 		.word	1135214592
 800 0098 A4703D0A 		.word	171798692
 801 009c D7434240 		.word	1078084567
 802 00a0 00000000 		.word	.LANCHOR0
 803              		.cfi_endproc
 804              	.LFE47:
 806              		.section	.text.MPU6050_DataReady,"ax",%progbits
 807              		.align	1
 808              		.global	MPU6050_DataReady
 809              		.syntax unified
 810              		.code	16
 811              		.thumb_func
 812              		.fpu softvfp
 814              	MPU6050_DataReady:
 815              	.LFB48:
 177:Core/Src/MPU6050.c **** 
 178:Core/Src/MPU6050.c **** 
 179:Core/Src/MPU6050.c **** int MPU6050_DataReady(void)
 180:Core/Src/MPU6050.c **** {
 816              		.loc 1 180 1 is_stmt 1 view -0
 817              		.cfi_startproc
 818              		@ args = 0, pretend = 0, frame = 0
 819              		@ frame_needed = 0, uses_anonymous_args = 0
 820 0000 10B5     		push	{r4, lr}
 821              	.LCFI13:
 822              		.cfi_def_cfa_offset 8
 823              		.cfi_offset 4, -8
 824              		.cfi_offset 14, -4
 181:Core/Src/MPU6050.c **** 	//old school way
 182:Core/Src/MPU6050.c **** 	/*
 183:Core/Src/MPU6050.c **** 	static uint8_t INT_STATE_FLAG = 0;
 184:Core/Src/MPU6050.c **** 	static uint8_t DATA_RDY_INT_FLAG = 0;
 185:Core/Src/MPU6050.c **** 	static uint8_t INT_PIN = 0;
 186:Core/Src/MPU6050.c **** 	INT_PIN = LL_GPIO_IsInputPinSet(MPU6050_INT_PORT, MPU6050_INT_PIN);
 187:Core/Src/MPU6050.c **** 	if(INT_PIN == 1)
 188:Core/Src/MPU6050.c **** 	{
 189:Core/Src/MPU6050.c **** 		MPU6050_Readbyte(MPU6050_INT_STATUS, &INT_STATE_FLAG); //flag cleared automatically within the se
 190:Core/Src/MPU6050.c **** 		DATA_RDY_INT_FLAG = INT_STATE_FLAG & 0x01;
 191:Core/Src/MPU6050.c **** 		if(DATA_RDY_INT_FLAG == 1)
 192:Core/Src/MPU6050.c **** 		{
 193:Core/Src/MPU6050.c **** 			INT_STATE_FLAG = 0; //flag clearing
 194:Core/Src/MPU6050.c **** 			DATA_RDY_INT_FLAG = 0;
 195:Core/Src/MPU6050.c **** 			INT_PIN = 0;
 196:Core/Src/MPU6050.c **** 			return 1;
 197:Core/Src/MPU6050.c **** 		}
 198:Core/Src/MPU6050.c **** 	}
 199:Core/Src/MPU6050.c **** 	return 0;
 200:Core/Src/MPU6050.c **** 	 */
ARM GAS  /tmp/ccA5Tg20.s 			page 20


 201:Core/Src/MPU6050.c **** 	return HAL_GPIO_ReadPin(MPU6050_INT_PORT, MPU6050_INT_PIN);
 825              		.loc 1 201 2 view .LVU183
 826              		.loc 1 201 9 is_stmt 0 view .LVU184
 827 0002 2021     		movs	r1, #32
 828 0004 0148     		ldr	r0, .L40
 829 0006 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 830              	.LVL70:
 202:Core/Src/MPU6050.c **** }
 831              		.loc 1 202 1 view .LVU185
 832              		@ sp needed
 833 000a 10BD     		pop	{r4, pc}
 834              	.L41:
 835              		.align	2
 836              	.L40:
 837 000c 00040048 		.word	1207960576
 838              		.cfi_endproc
 839              	.LFE48:
 841              		.section	.text.MPU6050_ProcessData,"ax",%progbits
 842              		.align	1
 843              		.global	MPU6050_ProcessData
 844              		.syntax unified
 845              		.code	16
 846              		.thumb_func
 847              		.fpu softvfp
 849              	MPU6050_ProcessData:
 850              	.LVL71:
 851              	.LFB49:
 203:Core/Src/MPU6050.c **** 
 204:Core/Src/MPU6050.c **** void MPU6050_ProcessData(Struct_MPU6050* mpu6050)
 205:Core/Src/MPU6050.c **** {
 852              		.loc 1 205 1 is_stmt 1 view -0
 853              		.cfi_startproc
 854              		@ args = 0, pretend = 0, frame = 0
 855              		@ frame_needed = 0, uses_anonymous_args = 0
 856              		.loc 1 205 1 is_stmt 0 view .LVU187
 857 0000 10B5     		push	{r4, lr}
 858              	.LCFI14:
 859              		.cfi_def_cfa_offset 8
 860              		.cfi_offset 4, -8
 861              		.cfi_offset 14, -4
 862 0002 0400     		movs	r4, r0
 206:Core/Src/MPU6050.c **** 	MPU6050_Get6AxisRawData(mpu6050);
 863              		.loc 1 206 2 is_stmt 1 view .LVU188
 864 0004 FFF7FEFF 		bl	MPU6050_Get6AxisRawData
 865              	.LVL72:
 207:Core/Src/MPU6050.c **** 	MPU6050_DataConvert(mpu6050);
 866              		.loc 1 207 2 view .LVU189
 867 0008 2000     		movs	r0, r4
 868 000a FFF7FEFF 		bl	MPU6050_DataConvert
 869              	.LVL73:
 208:Core/Src/MPU6050.c **** }
 870              		.loc 1 208 1 is_stmt 0 view .LVU190
 871              		@ sp needed
 872              	.LVL74:
 873              		.loc 1 208 1 view .LVU191
 874 000e 10BD     		pop	{r4, pc}
 875              		.cfi_endproc
ARM GAS  /tmp/ccA5Tg20.s 			page 21


 876              	.LFE49:
 878              		.global	MPU6050
 879              		.section	.bss.LSB_Sensitivity_ACC,"aw",%nobits
 880              		.align	2
 881              		.set	.LANCHOR1,. + 0
 884              	LSB_Sensitivity_ACC:
 885 0000 00000000 		.space	4
 886              		.section	.bss.LSB_Sensitivity_GYRO,"aw",%nobits
 887              		.align	2
 888              		.set	.LANCHOR0,. + 0
 891              	LSB_Sensitivity_GYRO:
 892 0000 00000000 		.space	4
 893              		.section	.bss.MPU6050,"aw",%nobits
 894              		.align	2
 897              	MPU6050:
 898 0000 00000000 		.space	44
 898      00000000 
 898      00000000 
 898      00000000 
 898      00000000 
 899              		.text
 900              	.Letext0:
 901              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 902              		.file 3 "Drivers/CMSIS/Device/ST/STM32F0xx/Include/stm32f051x8.h"
 903              		.file 4 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal_def.h"
 904              		.file 5 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal_dma.h"
 905              		.file 6 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal_i2c.h"
 906              		.file 7 "Core/Inc/MPU6050.h"
 907              		.file 8 "Core/Inc/i2c.h"
 908              		.file 9 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal_gpio.h"
 909              		.file 10 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal.h"
 910              		.file 11 "<built-in>"
ARM GAS  /tmp/ccA5Tg20.s 			page 22


DEFINED SYMBOLS
                            *ABS*:0000000000000000 MPU6050.c
     /tmp/ccA5Tg20.s:16     .text.MPU6050_Writebyte:0000000000000000 $t
     /tmp/ccA5Tg20.s:24     .text.MPU6050_Writebyte:0000000000000000 MPU6050_Writebyte
     /tmp/ccA5Tg20.s:67     .text.MPU6050_Writebyte:0000000000000024 $d
     /tmp/ccA5Tg20.s:72     .text.MPU6050_Writebytes:0000000000000000 $t
     /tmp/ccA5Tg20.s:79     .text.MPU6050_Writebytes:0000000000000000 MPU6050_Writebytes
     /tmp/ccA5Tg20.s:117    .text.MPU6050_Writebytes:000000000000001c $d
     /tmp/ccA5Tg20.s:122    .text.MPU6050_Readbyte:0000000000000000 $t
     /tmp/ccA5Tg20.s:129    .text.MPU6050_Readbyte:0000000000000000 MPU6050_Readbyte
     /tmp/ccA5Tg20.s:165    .text.MPU6050_Readbyte:000000000000001c $d
     /tmp/ccA5Tg20.s:170    .text.MPU6050_Readbytes:0000000000000000 $t
     /tmp/ccA5Tg20.s:177    .text.MPU6050_Readbytes:0000000000000000 MPU6050_Readbytes
     /tmp/ccA5Tg20.s:215    .text.MPU6050_Readbytes:000000000000001c $d
     /tmp/ccA5Tg20.s:220    .text.MPU6050_Get6AxisRawData:0000000000000000 $t
     /tmp/ccA5Tg20.s:227    .text.MPU6050_Get6AxisRawData:0000000000000000 MPU6050_Get6AxisRawData
     /tmp/ccA5Tg20.s:347    .text.MPU6050_Get_LSB_Sensitivity:0000000000000000 $t
     /tmp/ccA5Tg20.s:354    .text.MPU6050_Get_LSB_Sensitivity:0000000000000000 MPU6050_Get_LSB_Sensitivity
     /tmp/ccA5Tg20.s:457    .text.MPU6050_Get_LSB_Sensitivity:000000000000006c $d
     /tmp/ccA5Tg20.s:467    .rodata.MPU6050_Initialization.str1.4:0000000000000000 $d
     /tmp/ccA5Tg20.s:486    .text.MPU6050_Initialization:0000000000000000 $t
     /tmp/ccA5Tg20.s:493    .text.MPU6050_Initialization:0000000000000000 MPU6050_Initialization
     /tmp/ccA5Tg20.s:653    .text.MPU6050_Initialization:00000000000000d0 $d
     /tmp/ccA5Tg20.s:668    .text.MPU6050_DataConvert:0000000000000000 $t
     /tmp/ccA5Tg20.s:675    .text.MPU6050_DataConvert:0000000000000000 MPU6050_DataConvert
     /tmp/ccA5Tg20.s:798    .text.MPU6050_DataConvert:0000000000000090 $d
     /tmp/ccA5Tg20.s:807    .text.MPU6050_DataReady:0000000000000000 $t
     /tmp/ccA5Tg20.s:814    .text.MPU6050_DataReady:0000000000000000 MPU6050_DataReady
     /tmp/ccA5Tg20.s:837    .text.MPU6050_DataReady:000000000000000c $d
     /tmp/ccA5Tg20.s:842    .text.MPU6050_ProcessData:0000000000000000 $t
     /tmp/ccA5Tg20.s:849    .text.MPU6050_ProcessData:0000000000000000 MPU6050_ProcessData
     /tmp/ccA5Tg20.s:897    .bss.MPU6050:0000000000000000 MPU6050
     /tmp/ccA5Tg20.s:880    .bss.LSB_Sensitivity_ACC:0000000000000000 $d
     /tmp/ccA5Tg20.s:884    .bss.LSB_Sensitivity_ACC:0000000000000000 LSB_Sensitivity_ACC
     /tmp/ccA5Tg20.s:887    .bss.LSB_Sensitivity_GYRO:0000000000000000 $d
     /tmp/ccA5Tg20.s:891    .bss.LSB_Sensitivity_GYRO:0000000000000000 LSB_Sensitivity_GYRO
     /tmp/ccA5Tg20.s:894    .bss.MPU6050:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_I2C_Mem_Write
hi2c1
HAL_I2C_Mem_Read
HAL_Delay
puts
printf
__aeabi_i2f
__aeabi_fdiv
__aeabi_f2d
__aeabi_dadd
__aeabi_d2f
HAL_GPIO_ReadPin
